<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Vaisuhhhh! 💜🎉</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }

        /* Mobile Orientation and Touch Improvements */
        @media (max-width: 768px) and (orientation: landscape) {
            .main-title {
                font-size: clamp(1.5rem, 4vw, 2.2rem) !important;
                margin-bottom: 10px !important;
            }
            
            .text-line {
                font-size: clamp(0.7rem, 2vw, 0.9rem) !important;
                margin: 3px 0 !important;
            }
            
            .photos-grid {
                height: 250px !important;
            }
            
            .photo-frame,
            .photo-card img {
                width: 180px !important;
                height: 180px !important;
            }
            
            .cake-emoji {
                font-size: 3rem !important;
                margin: 10px 0 !important;
            }
            
            .knife-clickzone {
                padding: 20px !important;
                margin: 10px !important;
                min-height: 120px !important;
            }
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: #000;
            color: white;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-overflow-scrolling: touch;
        }

        .birthday-font {
            font-family: 'Dancing Script', cursive;
            font-weight: 700;
        }

        /* Stage 1: Black Screen with Let's Go Button */
        .stage-start {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 1;
            transition: opacity 2s ease;
        }

        .stage-start.hidden {
            opacity: 0;
            pointer-events: none;
            z-index: -1;
        }

        .lets-go-btn {
            padding: 20px 50px;
            font-size: 2rem;
            background: linear-gradient(45deg, #8B5CF6, #A78BFA, #C4B5FD);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            animation: pulseGlow 2s infinite;
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.7);
        }

        .lets-go-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 80px rgba(139, 92, 246, 0.9);
        }

        .lets-go-btn:active {
            transform: scale(1.05);
            box-shadow: 0 0 60px rgba(139, 92, 246, 0.8);
        }

        /* Mobile touch improvements */
        @media (max-width: 768px) {
            .lets-go-btn:hover {
                transform: none; /* Disable hover on mobile */
                box-shadow: 0 0 50px rgba(139, 92, 246, 0.7);
            }
            
            .lets-go-btn:active {
                transform: scale(0.95);
                box-shadow: 0 0 40px rgba(139, 92, 246, 0.6);
            }
        }

        @keyframes pulseGlow {
            0%, 100% {
                box-shadow: 0 0 50px rgba(139, 92, 246, 0.7);
                transform: scale(1);
            }
            50% {
                box-shadow: 0 0 100px rgba(139, 92, 246, 1);
                transform: scale(1.05);
            }
        }

        /* Stage 2: Universe Animation */
        .stage-universe {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, #1a0933 0%, #000 70%);
            opacity: 0;
            z-index: 900;
            transition: opacity 2s ease;
        }

        .stage-universe.active {
            opacity: 1;
        }

        .stars {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            animation: starZoom 4s linear infinite;
        }

        @media (max-width: 768px) {
            .star {
                animation-duration: 3s !important;
            }
        }

        @keyframes starZoom {
            0% {
                transform: scale(0) translateZ(-1000px);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: scale(20) translateZ(0px);
                opacity: 0;
            }
        }

        .milky-way {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%) scale(0);
            animation: galaxyExpand 6s ease-out forwards;
        }

        @keyframes galaxyExpand {
            0% {
                transform: translate(-50%, -50%) scale(0) rotate(0deg);
                opacity: 0;
            }
            50% {
                opacity: 0.8;
            }
            100% {
                transform: translate(-50%, -50%) scale(15) rotate(720deg);
                opacity: 0;
            }
        }

        /* Stage 3: Birthday Wishes with Photos */
        .stage-wishes {
            background: 
                radial-gradient(circle at 20% 80%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(167, 139, 250, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(196, 181, 253, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a0a2e 25%, #2d1b69 50%, #1a0a2e 75%, #0a0a0a 100%);
            overflow: hidden;
            align-items: center;
            justify-content: center;
        }

        /* Floating Hearts Background */
        .floating-hearts {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        /* Sparkle Container */
        .sparkle-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .wishes-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            max-width: 1200px;
            padding: 40px 20px;
            position: relative;
            z-index: 10;
            box-sizing: border-box;
            margin: 0 auto;
        }

        .main-title {
            font-size: clamp(2.5rem, 6vw, 5rem);
            text-align: center;
            margin: 0 0 10px 0;
            padding: 0 20px;
            opacity: 0;
            animation: titleAppear 3s ease-out forwards;
            background: linear-gradient(45deg, #8B5CF6, #A78BFA, #C4B5FD, #E9D5FF);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 50px rgba(139, 92, 246, 0.5);
            line-height: 1.2;
            width: 100%;
        }

        .animated-text {
            text-align: center;
            margin: 0 0 15px 0;
            width: 100%;
        }

        .text-line {
            display: block;
            font-size: clamp(1rem, 3vw, 1.8rem);
            color: #E9D5FF;
            margin: 8px 10px;
            opacity: 0;
            transform: translateX(-100px);
            animation: slideInFromLeft 1s ease-out forwards;
            line-height: 1.3;
            text-align: center;
        }

        .text-line-1 { animation-delay: 2s; }
        .text-line-2 { 
            animation-delay: 2.5s; 
            animation-name: slideInFromRight;
            transform: translateX(100px);
        }
        .text-line-3 { animation-delay: 3s; }

        @keyframes titleAppear {
            0% {
                opacity: 0;
                transform: translateY(100px) scale(0.5);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .photos-grid {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 500px;
           
            padding: 0 20px;
        }

        .photo-card {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0) rotate(45deg);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            opacity: 0;
        }

        .photo-card:nth-child(1) { 
            animation: photoRevealSequence 5s ease-in-out forwards;
            animation-delay: 3s; 
        }
        .photo-card:nth-child(2) { 
            animation: photoRevealSequence 5s ease-in-out forwards;
            animation-delay: 8s; 
        }
        .photo-card:nth-child(3) { 
            animation: photoRevealSequence 5s ease-in-out forwards;
            animation-delay: 13s; 
        }

        @keyframes photoRevealSequence {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) rotate(45deg);
            }
            15% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1.1) rotate(-5deg);
            }
            20% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1) rotate(0deg);
            }
            90% {
                opacity: 0.5;
                transform: translate(-50%, -50%) scale(0.8) rotate(5deg);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0) rotate(45deg);
            }
        }



        .photo-frame {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 320px;
            height: 320px;
            margin: 0 auto 20px auto;
        }

        .photo-card img {
            width: 320px;
            height: 320px;
            object-fit: contain;
            border-radius: 20px;
            background: rgba(0, 0, 0, 0.3);
            border: 3px solid #8B5CF6;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 
                0 15px 40px rgba(139, 92, 246, 0.4),
                inset 0 0 15px rgba(139, 92, 246, 0.1);
            display: block;
        }

        .photo-card:hover img {
            transform: scale(1.05) rotateY(5deg);
            box-shadow: 
                0 30px 80px rgba(139, 92, 246, 0.6),
                inset 0 0 30px rgba(139, 92, 246, 0.2);
        }

        .photo-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }

        .wish-message {
            position: absolute;
            top: 50%;
            left: calc(100% + 30px);
            transform: translateY(-50%);
            padding: 18px 30px;
            background: rgba(139, 92, 246, 0.25);
            backdrop-filter: blur(25px);
            border-radius: 20px;
            border: 2px solid rgba(139, 92, 246, 0.5);
            max-width: 350px;
            min-width: 280px;
            text-align: center;
            opacity: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            flex-wrap: wrap;
            box-shadow: 0 10px 30px rgba(139, 92, 246, 0.3);
            white-space: nowrap;
        }

        .photo-card:nth-child(1) .wish-message {
            animation: messageSequence 5s ease-in-out forwards;
            animation-delay: 3s;
        }

        .photo-card:nth-child(2) .wish-message {
            animation: messageSequence 5s ease-in-out forwards;
            animation-delay: 8s;
        }

        .photo-card:nth-child(3) .wish-message {
            animation: messageSequence 5s ease-in-out forwards;
            animation-delay: 13s;
        }

        @keyframes messageSequence {
            0% {
                opacity: 0;
                transform: translateY(-50%) translateX(20px) scale(0.8);
            }
            15% {
                opacity: 1;
                transform: translateY(-50%) translateX(0px) scale(1);
            }
            80% {
                opacity: 1;
                transform: translateY(-50%) translateX(0px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(-50%) translateX(-20px) scale(0.8);
            }
        }

        @keyframes messageFloat {
            0% {
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Stage 4: Knife and Cake Animation */
        .stage-cake {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #2d1b69 0%, #1a0933 50%, #0a0a0a 100%);
            opacity: 0;
            z-index: 700;
            transition: opacity 2s ease;
        }

        .stage-cake.active {
            opacity: 1;
        }

        .cake-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
        }

        .cake-emoji {
            font-size: 8rem;
            margin: 20px 0;
            animation: cakeBounce 2s ease-in-out infinite;
        }

        @keyframes cakeBounce {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(5deg); }
        }

        .knife-clickzone {
            padding: 60px;
            margin: 40px;
            border-radius: 30px;
            background: rgba(139, 92, 246, 0.15);
            border: 4px dashed rgba(139, 92, 246, 0.6);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 400px;
            min-height: 300px;
            transition: all 0.3s ease;
            opacity: 0;
            animation: knifeZoneAppear 2s ease-out 2s forwards;
        }

        .knife-clickzone:hover {
            background: rgba(139, 92, 246, 0.25);
            border-color: rgba(139, 92, 246, 0.8);
            transform: scale(1.02);
            box-shadow: 0 0 50px rgba(139, 92, 246, 0.6);
        }

        .knife {
            font-size: 4rem;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
            padding: 20px;
            border-radius: 15px;
            background: rgba(139, 92, 246, 0.3);
            border: 2px solid rgba(139, 92, 246, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .knife:hover {
            transform: scale(1.1) rotate(10deg);
            background: rgba(139, 92, 246, 0.3);
            border: 3px solid rgba(139, 92, 246, 0.7);
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.8);
        }

        .knife:active {
            transform: scale(1.1) rotate(25deg);
            background: rgba(139, 92, 246, 0.3);
        }

        .click-hint {
            font-size: 1rem;
            color: #C4B5FD;
            margin-top: 10px;
            animation: blinkHint 1.5s infinite;
            font-weight: bold;
        }

        @keyframes blinkHint {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.3; }
        }

        @keyframes knifeZoneAppear {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes knifeAppear {
            0% {
                opacity: 0;
                transform: translateX(-200px) rotate(-45deg);
            }
            100% {
                opacity: 1;
                transform: translateX(0) rotate(0deg);
            }
        }

        .cut-instruction {
            font-size: 1.5rem;
            margin-top: 30px;
            opacity: 0;
            animation: fadeIn 1s ease-out 4s forwards;
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        /* Enhanced Mobile Responsive Design for Wishes Stage */
        @media (max-width: 768px) {
            .wishes-container {
                padding: 15px 10px !important;
                height: 100vh !important;
                display: flex !important;
                flex-direction: column !important;
                justify-content: center !important;
                align-items: center !important;
                overflow: hidden !important;
            }

            .main-title {
                font-size: clamp(2.2rem, 6vw, 3.2rem) !important;
                margin-bottom: 15px !important;
                text-align: center !important;
                line-height: 1.1 !important;
                padding: 0 15px !important;
            }
            
            .animated-text {
                margin-bottom: 10px !important;
            }
            
            .text-line {
                font-size: clamp(0.9rem, 3vw, 1.2rem) !important;
                margin: 5px 0 !important;
                padding: 0 15px !important;
                line-height: 1.2 !important;
            }
            
            .photos-grid {
                height: 350px !important;
                margin: 10px 0 !important;
                padding: 0 10px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
            }
            
            .photo-frame {
                width: 250px !important;
                height: 250px !important;
            }
            
            .photo-card {
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
            }
            
            .photo-card img {
                width: 250px !important;
                height: 250px !important;
                object-fit: cover !important;
            }
            
            .wish-message {
                position: relative !important;
                top: auto !important;
                left: auto !important;
                transform: none !important;
                margin-top: 15px !important;
                max-width: 280px !important;
                min-width: 250px !important;
                font-size: 0.95rem !important;
                padding: 12px 18px !important;
                text-align: center !important;
                white-space: normal !important;
                word-wrap: break-word !important;
            }
            
            .photo-card:nth-child(1) .wish-message,
            .photo-card:nth-child(2) .wish-message,
            .photo-card:nth-child(3) .wish-message {
                animation: messageSequenceMobile 5s ease-in-out forwards;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: clamp(1.8rem, 5vw, 2.5rem) !important;
                padding: 0 10px !important;
            }
            
            .text-line {
                font-size: clamp(0.8rem, 2.5vw, 1rem) !important;
                padding: 0 10px !important;
            }
            
            .photos-grid {
                height: 300px !important;
                padding: 0 5px !important;
            }
            
            .photo-frame {
                width: 200px !important;
                height: 200px !important;
            }
            
            .photo-card img {
                width: 200px !important;
                height: 200px !important;
            }
            
            .wish-message {
                max-width: 220px !important;
                min-width: 200px !important;
                font-size: 0.85rem !important;
                padding: 10px 15px !important;
                margin-top: 12px !important;
            }
        }

        @keyframes sparkleFloat {
            0% { 
                opacity: 1; 
                transform: translateY(0) scale(0); 
            }
            50% { 
                opacity: 1; 
                transform: translateY(-20px) scale(1); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-40px) scale(0); 
            }
        }

        @keyframes messageSequenceMobile {
            0% {
                opacity: 0;
                transform: translate(-50%, 30px) scale(0.8);
            }
            15% {
                opacity: 1;
                transform: translate(-50%, 10px) scale(1);
            }
            80% {
                opacity: 1;
                transform: translate(-50%, 10px) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -10px) scale(0.8);
            }
        }

        /* Wishes Stage Animations */
        @keyframes floatUp {
            0% { 
                opacity: 0.8; 
                transform: translateY(0) rotate(0deg); 
            }
            50% { 
                opacity: 1; 
                transform: translateY(-50vh) rotate(180deg); 
            }
            100% { 
                opacity: 0; 
                transform: translateY(-100vh) rotate(360deg); 
            }
        }

        @keyframes twinkle {
            0%, 100% { 
                opacity: 0.3; 
                transform: scale(1); 
            }
            50% { 
                opacity: 1; 
                transform: scale(1.5); 
            }
        }

        @keyframes particleOrbit {
            0% { 
                transform: rotate(0deg) translateX(20px) rotate(0deg); 
            }
            100% { 
                transform: rotate(360deg) translateX(20px) rotate(-360deg); 
            }
        }

        /* Stage 5: Memories Slideshow */
        .stage-memories {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0933 25%, #2d1b69 50%, #1a0933 75%, #0a0a0a 100%);
            opacity: 0;
            z-index: 600;
            transition: opacity 2s ease;
        }

        .stage-memories.active {
            opacity: 1;
        }

        .stage-thankyou {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f4c75);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 800;
            opacity: 0;
            transform: scale(0.3);
            transition: all 2s ease;
        }

        .stage-thankyou.active {
            display: flex;
            opacity: 1;
            transform: scale(1);
            animation: finalSlideEntrance 2s ease-out forwards;
        }

        .final-birthday-content {
            text-align: center;
            max-width: 90%;
            margin: 0 auto;
            position: relative;
            padding: 20px;
        }

        .title-container {
            margin-bottom: 40px;
        }

        .final-title {
            font-size: clamp(3rem, 8vw, 5rem);
            background: linear-gradient(45deg, #8B5CF6, #A78BFA, #C4B5FD, #E9D5FF, #8B5CF6);
            background-size: 300% 300%;
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
            animation: gradientShift 3s ease-in-out infinite, titleBounce 2s ease-out 0.5s forwards;
            transform: translateY(-50px);
            opacity: 0;
            text-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
        }

        .sparkles {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 2rem;
            animation: sparkleFloat 2s ease-in-out infinite alternate;
        }

        .thank-you-messages {
            margin-bottom: 40px;
        }

        .message-line {
            font-size: clamp(1.2rem, 3.5vw, 1.8rem);
            color: #E9D5FF;
            margin-bottom: 25px;
            line-height: 1.5;
            opacity: 0;
            transform: translateX(-100px);
        }

        .message-1 {
            animation: slideInLeft 1s ease-out 1.5s forwards;
        }

        .message-2 {
            font-size: clamp(1.1rem, 3vw, 1.6rem);
            color: #C4B5FD;
            transform: translateX(100px);
            animation: slideInRight 1s ease-out 2s forwards;
        }

        .message-3 {
            font-size: clamp(1.1rem, 3vw, 1.6rem);
            color: #A78BFA;
            transform: translateY(50px);
            animation: slideInUp 1s ease-out 2.5s forwards;
        }

        .message-4 {
            font-size: clamp(1.2rem, 3.2vw, 1.7rem);
            color: #DDD6FE;
            font-weight: bold;
            transform: scale(0.5);
            animation: popIn 1s ease-out 3s forwards;
        }

        .celebration-section {
            margin-top: 30px;
        }

        .celebration-hearts {
            font-size: clamp(1.8rem, 5vw, 3rem);
            margin-bottom: 20px;
            animation: heartPulse 2s ease-in-out infinite alternate, fadeInScale 1s ease-out 3.5s forwards;
            opacity: 0;
            transform: scale(0);
        }

        .final-wishes {
            font-size: clamp(1rem, 2.8vw, 1.4rem);
            color: #F3E8FF;
            animation: glow 2s ease-in-out infinite alternate, slideInUp 1s ease-out 4s forwards;
            opacity: 0;
            transform: translateY(30px);
            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
            opacity: 0;
            gap: 60px;
            padding: 0 40px;
            box-sizing: border-box;
        }

        .slide.left-image {
            flex-direction: row !important;
        }

        .slide.right-image {
            flex-direction: row-reverse !important;
        }

        /* Slide Transition Effects */
        .slide.fade-in {
            transform: scale(0.8);
            transition: opacity 1s ease-in-out, transform 1s ease-in-out;
        }
        .slide.fade-in.active {
            opacity: 1;
            transform: scale(1);
        }

        .slide.slide-up {
            transform: translateY(100px);
            transition: opacity 1.2s ease, transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .slide.slide-up.active {
            opacity: 1;
            transform: translateY(0);
        }

        .slide.slide-down {
            transform: translateY(-100px);
            transition: opacity 1.2s ease, transform 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .slide.slide-down.active {
            opacity: 1;
            transform: translateY(0);
        }

        .slide.slide-left {
            transform: translateX(-100px);
            transition: opacity 1.3s ease, transform 1.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .slide.slide-left.active {
            opacity: 1;
            transform: translateX(0);
        }

        .slide.slide-right {
            transform: translateX(100px);
            transition: opacity 1.3s ease, transform 1.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .slide.slide-right.active {
            opacity: 1;
            transform: translateX(0);
        }

        .slide.zoom-in {
            transform: scale(0.3);
            transition: opacity 1.4s ease, transform 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .slide.zoom-in.active {
            opacity: 1;
            transform: scale(1);
        }

        .slide.rotate-in {
            transform: scale(0.5);
            transition: opacity 1.5s ease, transform 1.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .slide.rotate-in.active {
            opacity: 1;
            transform: scale(1);
        }

        .slide.bounce-in {
            transform: scale(0.3) translateY(-50px);
            transition: opacity 1.2s ease, transform 1.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .slide.bounce-in.active {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .slide.elastic-in {
            transform: scale(0.1);
            transition: opacity 1s ease, transform 1.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .slide.elastic-in.active {
            opacity: 1;
            transform: scale(1);
        }

        .slide-image-container {
            flex: 0 0 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            max-width: 50%;
        }

        .slide img,
        .slide video {
            max-width: 100%;
            max-height: 70vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(139, 92, 246, 0.5);
            background: rgba(0, 0, 0, 0.2);
            opacity: 0;
            transform: scale(0.8);
            transition: all 1s ease 0.2s;
        }

        .slide.active img,
        .slide.active video {
            opacity: 1;
            transform: scale(1) rotate(0deg) rotateX(0deg) rotateY(0deg) !important;
        }

        /* Image and video specific effects */
        .slide.zoom-in img,
        .slide.zoom-in video {
            transform: scale(0.2);
            transition: all 1.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s;
        }

        .slide.rotate-in img,
        .slide.rotate-in video {
            transform: scale(0.3);
            transition: all 1.7s cubic-bezier(0.25, 0.46, 0.45, 0.94) 0.2s;
        }

        .slide.bounce-in img,
        .slide.bounce-in video {
            transform: scale(0.2) translateY(-30px);
            transition: all 1.4s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s;
        }

        .slide.elastic-in img,
        .slide.elastic-in video {
            transform: scale(0.05);
            transition: all 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.2s;
        }

        .slide-content {
            flex: 0 0 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: left;
            padding: 30px;
            z-index: 2;
            height: 100%;
            max-width: 50%;
        }

        .slide.right-image .slide-content {
            text-align: right;
        }

        .slide.left-image .slide-content {
            text-align: left;
        }

        .slide-content h3,
        .slide-content .slide-title {
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.3s;
        }

        .slide-content p,
        .slide-content .slide-description {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease 0.6s;
        }

        .slide.active .slide-content h3,
        .slide.active .slide-content p,
        .slide.active .slide-content .slide-title,
        .slide.active .slide-content .slide-description {
            opacity: 1;
            transform: translateY(0);
        }

        .slide-title {
            font-size: 2.2rem;
            margin-bottom: 20px;
            color: #C4B5FD;
            text-shadow: 0 2px 10px rgba(139, 92, 246, 0.3);
            line-height: 1.2;
        }

        .slide-description {
            font-size: 1.3rem;
            color: #E9D5FF;
            line-height: 1.7;
            text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);
            max-width: 500px;
        }

        .slide.right-image .slide-description {
            margin-left: auto;
        }

        .slide.left-image .slide-description {
            margin-right: auto;
        }

        /* Stage 5: Mobile Slideshow Responsive Design - Complete Override */
        @media (max-width: 768px) {
            /* Fix stage memories container */
            .stage-memories {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                overflow: hidden !important;
                z-index: 600 !important;
            }

            .slideshow-container {
                position: relative !important;
                width: 100vw !important;
                height: 100vh !important;
                padding: 0 !important;
                margin: 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                overflow: hidden !important;
            }
            
            .slide {
                position: absolute !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
                padding: 0 !important;
                margin: 0 !important;
                box-sizing: border-box !important;
                overflow: hidden !important;
            }
            
            /* Override left/right positioning for mobile - always use column layout */
            .slide.left-image,
            .slide.right-image {
                flex-direction: column !important;
                align-items: center !important;
                justify-content: center !important;
                gap: 20px !important;
            }
            
            .slide-image-container {
                flex: none !important;
                width: 100vw !important;
                height: 60vh !important;
                display: flex !important;
                justify-content: center !important;
                align-items: center !important;
                order: 1 !important;
                margin: 0 !important;
                padding: 0 15px !important;
                box-sizing: border-box !important;
            }
            
            .slide img,
            .slide video {
                max-height: 55vh !important;
                max-width: calc(100vw - 30px) !important;
                width: auto !important;
                height: auto !important;
                object-fit: contain !important;
                border-radius: 12px !important;
                box-shadow: 0 8px 25px rgba(139, 92, 246, 0.4) !important;
                display: block !important;
                margin: 0 auto !important;
                position: relative !important;
                transform: translateX(0) translateY(0) !important;
            }
            
            .slide-content {
                flex: none !important;
                width: 100vw !important;
                height: 40vh !important;
                display: flex !important;
                flex-direction: column !important;
                align-items: center !important;
                justify-content: flex-start !important;
                text-align: center !important;
                order: 2 !important;
                padding: 20px 20px 40px 20px !important;
                margin: 0 !important;
                box-sizing: border-box !important;
                overflow-y: auto !important;
            }
            
            /* Override desktop positioning for mobile */
            .slide.left-image .slide-content,
            .slide.right-image .slide-content {
                order: 2 !important;
                text-align: center !important;
                align-items: center !important;
                justify-content: flex-start !important;
                width: 100vw !important;
                height: 40vh !important;
                margin: 0 !important;
                padding: 20px 20px 40px 20px !important;
            }
            
            .slide.left-image .slide-image-container,
            .slide.right-image .slide-image-container {
                order: 1 !important;
                width: 100vw !important;
                height: 60vh !important;
                margin: 0 !important;
            }
            
            .slide-title,
            .slide .slide-title {
                font-size: clamp(1.3rem, 4.5vw, 1.7rem) !important;
                line-height: 1.3 !important;
                color: #C4B5FD !important;
                text-shadow: 0 2px 10px rgba(139, 92, 246, 0.5) !important;
                margin: 0 0 15px 0 !important;
                padding: 0 15px !important;
                width: 100% !important;
                text-align: center !important;
                opacity: 1 !important;
                visibility: visible !important;
                display: block !important;
                transform: none !important;
                transition: none !important;
                word-wrap: break-word !important;
                overflow-wrap: break-word !important;
                font-weight: 600 !important;
            }
            
            .slide-description,
            .slide .slide-description {
                font-size: clamp(0.9rem, 3.2vw, 1.1rem) !important;
                line-height: 1.5 !important;
                color: #E9D5FF !important;
                margin: 0 !important;
                padding: 0 15px !important;
                width: 100% !important;
                text-align: center !important;
                opacity: 1 !important;
                visibility: visible !important;
                display: block !important;
                transform: none !important;
                transition: none !important;
                max-width: none !important;
                word-wrap: break-word !important;
                overflow-wrap: break-word !important;
            }
            
            /* Simplified mobile animations */
            .slide.slide-left,
            .slide.slide-right,
            .slide.slide-up,
            .slide.slide-down,
            .slide.zoom-in,
            .slide.bounce-in,
            .slide.elastic-in,
            .slide.fade-in {
                opacity: 0 !important;
                transform: translateY(30px) scale(0.95) !important;
                transition: opacity 0.6s ease, transform 0.6s ease !important;
            }
            
            .slide.slide-left.active,
            .slide.slide-right.active,
            .slide.slide-up.active,
            .slide.slide-down.active,
            .slide.zoom-in.active,
            .slide.bounce-in.active,
            .slide.elastic-in.active,
            .slide.fade-in.active {
                opacity: 1 !important;
                transform: translateY(0) scale(1) !important;
            }
            
            /* Force complete visibility for all content */
            .slide * {
                opacity: 1 !important;
                visibility: visible !important;
            }
            
            .slide.active * {
                opacity: 1 !important;
                visibility: visible !important;
            }
            
            /* Final message mobile optimization */
            .final-slide {
                padding: 30px 20px !important;
            }
            
            .final-birthday-message {
                text-align: center !important;
                max-width: 100% !important;
            }
            
            .final-title {
                font-size: clamp(1.8rem, 6vw, 2.8rem) !important;
                margin-bottom: 20px !important;
            }
            
            .final-message-1 {
                font-size: clamp(1rem, 3vw, 1.3rem) !important;
                margin-bottom: 15px !important;
            }
            
            .final-message-2 {
                font-size: clamp(0.9rem, 2.5vw, 1.1rem) !important;
            }
            
            .celebration-hearts {
                font-size: clamp(1.2rem, 4vw, 1.8rem) !important;
                margin-top: 20px !important;
            }
        }

        /* Extra small mobile screens */
        @media (max-width: 480px) {
            .slide-image-container {
                height: 55vh !important;
                padding: 0 10px !important;
            }
            
            .slide img,
            .slide video {
                max-height: 50vh !important;
                max-width: calc(100vw - 20px) !important;
                border-radius: 10px !important;
            }
            
            .slide-content {
                height: 45vh !important;
                padding: 15px 15px 30px 15px !important;
            }
            
            .slide-title,
            .slide .slide-title {
                font-size: clamp(1.1rem, 4.2vw, 1.4rem) !important;
                margin-bottom: 12px !important;
                padding: 0 10px !important;
                line-height: 1.25 !important;
            }
            
            .slide-description,
            .slide .slide-description {
                font-size: clamp(0.85rem, 3.5vw, 1rem) !important;
                padding: 0 10px !important;
                line-height: 1.4 !important;
            }
        }

        /* Landscape mobile optimization */
        @media (max-width: 768px) and (orientation: landscape) {
            .slide {
                flex-direction: row !important;
                padding: 10px !important;
            }
            
            .slide-image-container {
                width: 50vw !important;
                height: 100vh !important;
                order: 1 !important;
                padding: 10px !important;
            }
            
            .slide img,
            .slide video {
                max-height: 80vh !important;
                max-width: calc(50vw - 20px) !important;
            }
            
            .slide-content {
                width: 50vw !important;
                height: 100vh !important;
                order: 2 !important;
                padding: 20px 15px !important;
                justify-content: center !important;
            }
            
            .slide.left-image {
                flex-direction: row !important;
            }
            
            .slide.right-image {
                flex-direction: row-reverse !important;
            }
        }

        /* Responsive image sizing for desktop */
        @media (min-width: 769px) {
            .photo-card img {
                width: 400px;
                height: 400px;
            }
            
            .slide img,
            .slide video {
                max-height: 600px;
            }
        }

        @media (min-width: 1200px) {
            .photo-card img {
                width: 450px;
                height: 450px;
            }
            
            .slide img,
            .slide video {
                max-height: 700px;
            }
            
            .slideshow-container {
                padding: 60px;
            }
            
            .slide {
                gap: 80px;
            }
        }

        /* Videos now use pure autoplay - no controls or overlays needed */

        /* Audio Controls */
        .audio-control {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-radius: 50px;
            padding: 10px 20px;
            backdrop-filter: blur(10px);
        }

        /* Comprehensive Mobile Responsive Design */
        @media (max-width: 768px) {
            /* Stage 1: Start Button */
            .lets-go-btn {
                padding: 15px 40px !important;
                font-size: 1.5rem !important;
                min-width: 200px !important;
            }

            /* Stage 3: Wishes Stage */
            .main-title { 
                font-size: 2.8rem !important; 
                line-height: 1.1 !important;
                margin-bottom: 15px !important;
            }
            
            .text-line {
                font-size: 1.1rem !important;
                margin: 6px 0 !important;
                padding: 0 15px !important;
            }

            .photos-grid { 
                height: 350px !important;
                padding: 0 10px !important;
            }
            
            .photo-card img { 
                width: 250px !important; 
                height: 250px !important; 
            }

            .photo-frame {
                width: 250px !important;
                height: 250px !important;
            }

            .wish-message {
                position: absolute !important;
                top: 100% !important;
                left: 50% !important;
                transform: translate(-50%, 15px) !important;
                max-width: 250px !important;
                min-width: 200px !important;
                font-size: 0.9rem !important;
                padding: 10px 15px !important;
                text-align: center !important;
                white-space: normal !important;
            }

            /* Stage 4: Cake Stage */
            .cake-emoji { 
                font-size: 5rem !important;
                margin: 15px 0 !important;
            }
            
            .knife { 
                font-size: 2.5rem !important;
                padding: 15px !important;
            }
            
            .knife-clickzone {
                padding: 40px 30px !important;
                margin: 20px !important;
                min-width: 280px !important;
                min-height: 200px !important;
            }
            
            .cut-instruction {
                font-size: 1.2rem !important;
                padding: 0 20px !important;
                text-align: center !important;
            }

            .click-hint {
                font-size: 0.9rem !important;
            }

            /* Audio Controls */
            .audio-control {
                top: 15px !important;
                right: 15px !important;
                padding: 8px 15px !important;
                font-size: 0.9rem !important;
            }
        }

        @media (max-width: 480px) {
            /* Extra small screens */
            .lets-go-btn {
                padding: 12px 30px !important;
                font-size: 1.3rem !important;
                min-width: 180px !important;
            }

            .main-title { 
                font-size: 2.2rem !important; 
                padding: 0 10px !important;
            }
            
            .text-line {
                font-size: 1rem !important;
                padding: 0 10px !important;
            }

            .photo-card img { 
                width: 200px !important; 
                height: 200px !important; 
            }

            .photo-frame {
                width: 200px !important;
                height: 200px !important;
            }

            .wish-message {
                max-width: 200px !important;
                min-width: 180px !important;
                font-size: 0.8rem !important;
                padding: 8px 12px !important;
            }

            .cake-emoji { 
                font-size: 4rem !important;
            }
            
            .knife { 
                font-size: 2rem !important;
                padding: 12px !important;
            }
            
            .knife-clickzone {
                padding: 30px 20px !important;
                margin: 15px !important;
                min-width: 240px !important;
                min-height: 180px !important;
            }
            
            .cut-instruction {
                font-size: 1rem !important;
                padding: 0 15px !important;
            }

            .click-hint {
                font-size: 0.8rem !important;
            }
        }

        /* Stage Display Control */
        .stage-universe, .stage-wishes, .stage-cake, .stage-memories {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 800;
        }

        .stage-universe.active, .stage-wishes.active, .stage-cake.active, .stage-memories.active, .stage-thankyou.active {
            display: flex;
        }

        /* Enhanced Thank You Message Animations */
        @keyframes finalSlideEntrance {
            0% { 
                opacity: 0;
                transform: scale(0.3) rotateY(180deg);
            }
            50% {
                opacity: 0.7;
                transform: scale(1.1) rotateY(90deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) rotateY(0deg);
            }
        }

        @keyframes gradientShift {
            0%, 100% { 
                background-position: 0% 50%; 
            }
            50% { 
                background-position: 100% 50%; 
            }
        }

        @keyframes titleBounce {
            0% { 
                opacity: 0;
                transform: translateY(-50px) scale(0.8);
            }
            60% {
                opacity: 1;
                transform: translateY(10px) scale(1.1);
            }
            100% { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes slideInLeft {
            0% { 
                opacity: 0;
                transform: translateX(-100px);
            }
            100% { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            0% { 
                opacity: 0;
                transform: translateX(100px);
            }
            100% { 
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInUp {
            0% { 
                opacity: 0;
                transform: translateY(50px);
            }
            100% { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes popIn {
            0% { 
                opacity: 0;
                transform: scale(0.5) rotate(-10deg);
            }
            70% {
                opacity: 1;
                transform: scale(1.1) rotate(5deg);
            }
            100% { 
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        @keyframes fadeInScale {
            0% { 
                opacity: 0;
                transform: scale(0);
            }
            100% { 
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes sparkleFloat {
            0% { 
                transform: translateX(-50%) translateY(0) rotate(0deg);
            }
            100% { 
                transform: translateX(-50%) translateY(-10px) rotate(10deg);
            }
        }

        @keyframes glow {
            0% { 
                text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
            }
            100% { 
                text-shadow: 0 0 20px rgba(139, 92, 246, 0.8), 0 0 30px rgba(139, 92, 246, 0.6);
            }
        }

        @keyframes heartPulse {
            0% { 
                transform: scale(1);
                opacity: 0.8;
            }
            100% { 
                transform: scale(1.2);
                opacity: 1;
                text-shadow: 0 0 15px rgba(139, 92, 246, 0.7);
            }
        }
    </style>
</head>
<body>
    <!-- Stage 1: Black Screen with Let's Go Button -->
    <div class="stage-start" id="stageStart">
        <button class="lets-go-btn birthday-font" onclick="startBirthdayJourney()">
            ✨ Let's Go! ✨
        </button>
    </div>

    <!-- Stage 2: Universe Animation -->
    <div class="stage-universe" id="stageUniverse">
        <div class="stars" id="starsContainer"></div>
        <div class="milky-way"></div>
    </div>

    <!-- Stage 3: Birthday Wishes with Photos -->
    <div class="stage-wishes" id="stageWishes">
        <!-- Floating Hearts Background -->
        <div class="floating-hearts"></div>
        
        <!-- Sparkle Effects -->
        <div class="sparkle-container"></div>
        
        <!-- Main Content -->
        <div class="wishes-container">
            <h1 class="main-title birthday-font">Happy Birthday Vaisuhhhh! 💜</h1>
            
          
            
            <div class="photos-grid">
                <div class="photo-card photo-card-1">
                    <div class="photo-frame">
                        <img src="v/vai.jpg" alt="Beautiful Vaisuhhhh" onerror="this.style.display='none';">
                        <div class="photo-glow"></div>
                        <div class="photo-particles"></div>
                    </div>
                    <div class="wish-message">
                        <span class="wish-icon">💜</span>
                        <span class="wish-text">You bring joy to everyone around you!</span>
                        <span class="wish-icon">💜</span>
                    </div>
                </div>
                <div class="photo-card photo-card-2">
                    <div class="photo-frame">
                        <img src="v/VAisuhhh2.jpg" alt="Amazing Vaisuhhhh" onerror="this.style.display='none';">
                        <div class="photo-glow"></div>
                        <div class="photo-particles"></div>
                    </div>
                    <div class="wish-message">
                        <span class="wish-icon">✨</span>
                        <span class="wish-text">Your smile lights up the entire world!</span>
                        <span class="wish-icon">✨</span>
                    </div>
                </div>
                <div class="photo-card photo-card-3">
                    <div class="photo-frame">
                        <img src="v/Vaisuhhhh.jpg" alt="Wonderful Vaisuhhhh" onerror="this.style.display='none';">
                        <div class="photo-glow"></div>
                        <div class="photo-particles"></div>
                    </div>
                    <div class="wish-message">
                        <span class="wish-icon">🌟</span>
                        <span class="wish-text">Forever amazing and absolutely wonderful!</span>
                        <span class="wish-icon">🌟</span>
                    </div>
                </div>
            </div>
            
            <!-- Birthday Countdown Effect -->
            <div class="birthday-countdown">
                <div class="countdown-item">
                    <span class="countdown-number">🎂</span>
                    <span class="countdown-label">Another Amazing Year!</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Stage 4: Knife and Cake Animation -->
    <div class="stage-cake" id="stageCake">
        <div class="cake-container">
            <h2 class="main-title birthday-font" style="font-size: clamp(2rem, 5vw, 4rem); margin-bottom: 20px; text-align: center; padding: 0 20px;">Time to Cut the Cake!</h2>
            <div class="cake-emoji">🎂</div>
            
            <!-- Large clickable area around knife -->
            <div class="knife-clickzone" onclick="window.cutCake()" title="Click anywhere here to cut the cake!">
                <div class="knife" id="knifeElement">
                    🔪
                    <div class="click-hint">👆 CLICK ANYWHERE HERE!</div>
                </div>
            </div>
            
            <p class="cut-instruction birthday-font">Click the knife area to cut the cake! 🎉</p>
        </div>
    </div>

    <!-- Stage 5: Memories Slideshow -->
    <div class="stage-memories" id="stageMemories">
        <div class="slideshow-container" id="slideshowContainer">
            <!-- Slides will be generated dynamically -->
        </div>
    </div>

    <!-- Stage 6: Thank You Message -->
    <div class="stage-thankyou" id="stageThankYou">
        <div class="final-birthday-content">
            
            <!-- Animated Title -->
            <div class="title-container">
                <h1 class="birthday-font final-title">
                    🎉 Happy Birthday Vaisuhhhh! 💜
                </h1>
                <div class="sparkles">✨ ⭐ ✨ ⭐ ✨</div>
            </div>
            
            <!-- Thank You Messages with Staggered Animation -->
            <div class="thank-you-messages">
                <p class="message-line message-1">
                    💝 Thank you for being absolutely amazing, Vaisuhhhh! 💝
                </p>
                
                <p class="message-line message-2">
                    🌟 Your kindness, beauty, and wonderful spirit brighten every day! 🌟
                </p>
                
                <p class="message-line message-3">
                    🎈 May this new year bring you endless happiness, love, and success! 🎈
                </p>
                
                <p class="message-line message-4">
                    🎂✨ You deserve all the wonderful things life has to offer! ✨🎂
                </p>
            </div>
            
            <!-- Animated Hearts and Celebration -->
            <div class="celebration-section">
                <div class="celebration-hearts">
                    💜 🎉 ✨ 🎂 🫶🏻 🎈 💖 💝 💜
                </div>
                
                <div class="final-wishes">
                    🎊 Wishing you the most magical birthday ever! 🎊<br>
                    💫 Stay amazing, stay beautiful, stay you! 💫
                </div>
            </div>
        </div>
    </div>

    <!-- Audio for Happy Birthday Song (local file) -->
    <audio id="birthdaySong" preload="auto">
        <source src="hb.mp3" type="audio/mpeg">
        <!-- Fallback: we'll use Web Audio API to generate a simple happy birthday tune -->
    </audio>

    <!-- Countdown Sound Effects (using Web Audio API instead of external files) -->
    <audio id="countdownTick" preload="auto" style="display: none;">
        <!-- Will be generated using Web Audio API -->
    </audio>
    
    <audio id="countdownFinal" preload="auto" style="display: none;">
        <!-- Will be generated using Web Audio API -->
    </audio>

    <!-- Background Music for Stages 2-4 -->
    <audio id="backgroundMusic" preload="auto" loop style="display: none;">
        <source src="start.mp3" type="audio/mpeg">
    </audio>

    <!-- Audio Control -->
    <div class="audio-control" id="audioControl" style="display: none;">
        <i class="fas fa-volume-up" id="audioIcon"></i>
        <span id="audioStatus">Music Playing</span>
    </div>

    <script>
        // Gallery images with descriptions
        const memoryImages = [
            { src: 'vaisuhh-photos/Snapchat-1655543332.jpg', title: 'Vaisuhhhh\'s💜 Snapchat Fun', description: 'Capturing fun moments and memories through creative selfies. Vaisuhhhh always knows how to have a good time!' },
            { src: 'vaisuhh-photos/IMG_20250111_121039.jpg', title: 'Vaisuhhhh\'s💜 Stylish Moments', description: 'Looking absolutely stunning every day with that natural grace and beauty. Style comes so naturally to Vaisuhhhh!' },
            { src: 'vaisuhh-photos/Snapchat-1974527526.jpg', title: 'Vaisuhhhh\'s💜 Beautiful Selfie', description: 'Natural beauty captured perfectly, showing her authentic and wonderful personality that shines from within.' },
            { src: 'vaisuhh-photos/IMG_20250127_120918.jpg', title: 'Vaisuhhhh\'s💜 Recent Memories', description: 'Making new beautiful memories in 2025, each moment more precious than the last. Here\'s to creating many more!' },
            { src: 'vaisuhh-photos/Snapchat-1244240034.jpg', title: 'Vaisuhhhh\'s💜 Special Moments', description: 'Cherished moments that bring joy and happiness to everyone around. These are the memories we treasure forever.' },
            { src: 'vaisuhh-photos/Snapchat-589800402.jpg', title: 'Vaisuhhhh\'s💜 Creative Side', description: 'Always finding new ways to express herself creatively. Vaisuhhhh brings art and beauty to every moment.' },
            { src: 'vaisuhh-photos/IMG_20240827_102853.jpg', title: 'Vaisuhhhh\'s💜 Adventures', description: 'Exploring the world with that beautiful smile, making every place brighter just by being there.' },
            { src: 'vaisuhh-photos/IMG-20220613-WA0009.jpg', title: 'Vaisuhhhh\'s💜 Vintage Vibes', description: 'Timeless beauty that never goes out of style. Some moments from 2022 that captured Vaisuhhhh\'s classic charm.' },
            { src: 'vaisuhh-photos/Screenshot_20220917_000445.jpg', title: 'Vaisuhhhh\'s💜 Digital Memories', description: 'Capturing moments in the digital age with screenshots and fun edits. Technology meets Vaisuhhhh\'s creativity!' },
            { src: 'vaisuhh-photos/Snapchat-1746931653.jpg', title: 'Vaisuhhhh\'s💜 Creative Magic', description: 'Always creating something beautiful and magical with filters and effects. Vaisuhhhh\'s artistic side shines through!' },
            { src: 'vaisuhh-photos/IMG-20250124-WA0042.jpg', title: 'Vaisuhhhh\'s💜 2025 Moments', description: 'Starting the new year with beautiful memories and exciting adventures. Here\'s to making 2025 the best year yet!' },
            { src: 'vaisuhh-photos/IMG_20230323_135301.jpg', title: 'Vaisuhhhh\'s💜 Spring Vibes', description: 'Beautiful spring moments from March 2023, when Vaisuhhhh embraced the season of renewal and growth with her radiant energy.' },
            { src: 'vaisuhh-photos/IMG_20230705_163438.jpg', title: 'Vaisuhhhh\'s💜 Summer Glow', description: 'Radiant summer moments from July 2023, showcasing Vaisuhhhh\'s natural glow and vibrant personality during the sunny season.' },
            { src: 'vaisuhh-photos/IMG_20250111_121215.jpg', title: 'Vaisuhhhh\'s💜 New Year Portrait', description: 'Starting 2025 with elegance and beauty, this portrait captures Vaisuhhhh\'s grace as she welcomed the new year with style.' },
            { src: 'vaisuhh-photos/IMG_20250127_190957.jpg', title: 'Vaisuhhhh\'s💜 Evening Elegance', description: 'Beautiful evening moments in 2025, where Vaisuhhhh\'s elegance shines through in the gentle twilight hours.' },
            { src: 'vaisuhh-photos/IMG_20250405_132245.jpg', title: 'Vaisuhhhh\'s💜 Spring Day', description: 'Blossoming beauty in April 2025, capturing Vaisuhhhh during a perfect spring day filled with warmth and joy.' },
            { src: 'vaisuhh-photos/RECAP_exported_16533.jpg', title: 'Vaisuhhhh\'s💜 Year Recap', description: 'A special compilation of amazing moments, bringing together the highlights of Vaisuhhhh\'s incredible journey through the year.' },
            { src: 'vaisuhh-photos/Snapchat-115020311.jpg', title: 'Vaisuhhhh\'s💜 Creative Snaps', description: 'More creative Snapchat moments showcasing Vaisuhhhh\'s fun and playful side with artistic filters and effects.' },
            { src: 'vaisuhh-photos/Snapchat-1277222546.jpg', title: 'Vaisuhhhh\'s💜 Sparkles', description: 'Sparkling personality shining through every photo, Vaisuhhhh brings light and joy to every moment she captures.' },
            { src: 'vaisuhh-photos/Snapchat-1294605687.jpg', title: 'Vaisuhhhh\'s💜 Colorful World', description: 'Bringing color to every moment, Vaisuhhhh\'s vibrant personality makes even ordinary days extraordinary and beautiful.' },
            { src: 'vaisuhh-photos/Snapchat-1481488708.jpg', title: 'Vaisuhhhh\'s💜 Adorable Side', description: 'Absolutely adorable in every way, this photo captures the sweet and lovable nature that makes Vaisuhhhh so special.' },
            { src: 'vaisuhh-photos/Snapchat-1589774218.jpg', title: 'Vaisuhhhh\'s💜 Fire Looks', description: 'Looking absolutely fire in every shot, Vaisuhhhh\'s confidence and beauty are undeniable in this stunning capture.' },
            { src: 'vaisuhh-photos/Snapchat-2136970077.jpg', title: 'Vaisuhhhh\'s💜 Fresh Vibes', description: 'Fresh and vibrant energy always radiates from Vaisuhhhh, bringing a breath of fresh air to every photo and moment.' },
            { src: 'vaisuhh-photos/Snapchat-457702673.jpg', title: 'Vaisuhhhh\'s💜 Dreamy Looks', description: 'Looking dreamy and ethereal, this photo captures Vaisuhhhh\'s otherworldly beauty and gentle, captivating presence.' },
            { src: 'vaisuhh-photos/Snapchat-554945129.jpg', title: 'Vaisuhhhh\'s💜 Grace', description: 'Graceful like a beautiful butterfly, Vaisuhhhh moves through life with elegance and poise that inspires everyone around her.' },
            { src: 'vaisuhh-photos/Snapchat-984924612~2.jpg', title: 'Vaisuhhhh the Queen', description: 'The absolute queen of beauty and grace, this final photo showcases why Vaisuhhhh truly deserves to be celebrated today and always!' },
            
            // Video memories at the end (using WebM format for better compatibility)
            { 
                src: 'video/video1.webm', 
                title: 'Vaisuhhhh\'s💜 Video Memories 1', 
                description: 'Beautiful moments captured in motion - Vaisuhhhh\'s amazing video memories that bring her personality to life!', 
                type: 'video' 
            },
            { 
                src: 'video/video2.webm', 
                title: 'Vaisuhhhh\'s💜 Video Memories 2', 
                description: 'More incredible video moments showing Vaisuhhhh\'s vibrant energy and beautiful smile in action!', 
                type: 'video' 
            },
            { 
                src: 'video/video3.webm', 
                title: 'Vaisuhhhh\'s💜 Video Memories 3', 
                description: 'The final video collection - capturing Vaisuhhhh\'s most precious moving memories for this special birthday celebration!', 
                type: 'video' 
            }
        ];

        let currentSlide = 0;
        let slideInterval;

        // Create stars animation
        function createStars() {
            const starsContainer = document.getElementById('starsContainer');
            for (let i = 0; i < 100; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.width = Math.random() * 3 + 1 + 'px';
                star.style.height = star.style.width;
                star.style.animationDelay = Math.random() * 4 + 's';
                starsContainer.appendChild(star);
            }
        }

        // Start the birthday journey
        function startBirthdayJourney() {
            console.log('🚀 Starting birthday journey');
            
            // Initialize audio context on user interaction
            initAudioContext();
            
            const stageStart = document.getElementById('stageStart');
            stageStart.classList.add('hidden');
            
            // Show countdown after button disappears
            setTimeout(() => {
                showCountdown();
            }, 1000);
            
            // Completely remove the start stage after transition
            setTimeout(() => {
                stageStart.style.display = 'none';
                stageStart.remove();
            }, 2500);
        }

        // Make function globally available immediately
        window.startBirthdayJourney = startBirthdayJourney;

        // Web Audio API for countdown sounds
        let audioContext;
        let countdownAudioEnabled = false;

        // Initialize audio context
        function initAudioContext() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                countdownAudioEnabled = true;
                console.log('🔊 Audio context initialized for countdown sounds');
            } catch (error) {
                console.log('Audio context not available:', error);
                countdownAudioEnabled = false;
            }
        }

        // Generate countdown beep sound with fallback
        function playCountdownBeep(frequency = 800, duration = 0.3) {
            // Try Web Audio API first
            if (countdownAudioEnabled && audioContext) {
                try {
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
                    oscillator.type = 'sine';
                    
                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.05);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
                    
                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                    
                    console.log(`🔊 Playing countdown beep at ${frequency}Hz`);
                    return;
                } catch (error) {
                    console.log('Web Audio API error, trying HTML5 audio fallback:', error);
                }
            }
            
            // Fallback: Try HTML5 audio elements
            try {
                const countdownTick = document.getElementById('countdownTick');
                if (countdownTick) {
                    countdownTick.currentTime = 0;
                    countdownTick.volume = 0.5;
                    countdownTick.play().catch(e => console.log('HTML5 audio failed:', e));
                }
            } catch (error) {
                console.log('HTML5 audio fallback failed:', error);
            }
        }

        // Generate final countdown sound (different tone) with fallback
        function playFinalCountdownSound() {
            // Try Web Audio API first
            if (countdownAudioEnabled && audioContext) {
                try {
                    // Create a more dramatic sound for the final "GO!"
                    const oscillator1 = audioContext.createOscillator();
                    const oscillator2 = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator1.connect(gainNode);
                    oscillator2.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    // Two frequency harmony for richer sound
                    oscillator1.frequency.setValueAtTime(600, audioContext.currentTime);
                    oscillator2.frequency.setValueAtTime(900, audioContext.currentTime);
                    oscillator1.type = 'sine';
                    oscillator2.type = 'triangle';
                    
                    gainNode.gain.setValueAtTime(0, audioContext.currentTime);
                    gainNode.gain.linearRampToValueAtTime(0.4, audioContext.currentTime + 0.1);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.8);
                    
                    oscillator1.start(audioContext.currentTime);
                    oscillator2.start(audioContext.currentTime);
                    oscillator1.stop(audioContext.currentTime + 0.8);
                    oscillator2.stop(audioContext.currentTime + 0.8);
                    
                    console.log('🔊 Playing final countdown sound');
                    return;
                } catch (error) {
                    console.log('Web Audio API error for final sound, trying fallback:', error);
                }
            }
            
            // Fallback: Try HTML5 audio elements
            try {
                const countdownFinal = document.getElementById('countdownFinal');
                if (countdownFinal) {
                    countdownFinal.currentTime = 0;
                    countdownFinal.volume = 0.6;
                    countdownFinal.play().catch(e => console.log('Final HTML5 audio failed:', e));
                }
            } catch (error) {
                console.log('HTML5 final audio fallback failed:', error);
            }
        }

        // Show countdown 3, 2, 1
        function showCountdown() {
            console.log('🕐 Starting countdown with sound effects');
            
            // Create countdown container
            const countdownDiv = document.createElement('div');
            countdownDiv.id = 'countdownStage';
            countdownDiv.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                z-index: 1000;
                font-family: 'Dancing Script', cursive;
            `;
            
            // Add sound indicator
            const soundIndicator = document.createElement('div');
            soundIndicator.style.cssText = `
                position: absolute;
                top: 30px;
                right: 30px;
                color: ${countdownAudioEnabled ? '#C4B5FD' : '#666'};
                font-size: 1rem;
                opacity: 0.8;
            `;
            soundIndicator.innerHTML = countdownAudioEnabled ? '🔊 Sound ON' : '🔇 Sound OFF';
            countdownDiv.appendChild(soundIndicator);
            
            const countdownNumber = document.createElement('div');
            countdownNumber.id = 'countdownNumber';
            countdownNumber.style.cssText = `
                font-size: ${window.innerWidth <= 768 ? '8rem' : window.innerWidth <= 480 ? '6rem' : '15rem'};
                font-weight: bold;
                color: transparent;
                background: linear-gradient(45deg, #8B5CF6, #A78BFA, #C4B5FD);
                background-clip: text;
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                text-align: center;
                transform: scale(0);
                transition: all 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
                text-shadow: 0 0 50px rgba(139, 92, 246, 0.5);
            `;
            
            countdownDiv.appendChild(countdownNumber);
            document.body.appendChild(countdownDiv);
            
            let count = 3;
            
            function showNumber() {
                countdownNumber.textContent = count;
                countdownNumber.style.transform = 'scale(1)';
                
                // Play countdown sound based on number
                if (count > 1) {
                    // Regular countdown beeps for 3 and 2
                    playCountdownBeep(800 + (count * 100), 0.4);
                } else {
                    // Special sound for 1 (final number)
                    playCountdownBeep(1200, 0.5);
                }
                
                // Create sparkle effect
                createCountdownSparkles();
                
                setTimeout(() => {
                    countdownNumber.style.transform = 'scale(0)';
                    count--;
                    
                    if (count > 0) {
                        setTimeout(showNumber, 300);
                    } else {
                        // Play final "GO!" sound
                        playFinalCountdownSound();
                        
                        // Start background music after countdown
                        setTimeout(() => {
                            playBackgroundMusic();
                        }, 800);
                        
                        // After countdown, start universe stage
                        setTimeout(() => {
                            countdownDiv.remove();
                            document.getElementById('stageUniverse').style.display = 'block';
                            document.getElementById('stageUniverse').classList.add('active');
                            createStars();
                            
                            // Continue the birthday journey after universe
                            continueJourney();
                        }, 500);
                    }
                }, 700);
            }
            
            // Start countdown
            setTimeout(showNumber, 200);
        }

        // Create sparkle effects for countdown
        function createCountdownSparkles() {
            const colors = ['#8B5CF6', '#A78BFA', '#C4B5FD', '#E9D5FF'];
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.style.cssText = `
                        position: fixed;
                        width: 4px;
                        height: 4px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        border-radius: 50%;
                        top: ${Math.random() * 100}vh;
                        left: ${Math.random() * 100}vw;
                        animation: sparkleFloat 1.5s ease-out forwards;
                        pointer-events: none;
                        z-index: 1001;
                        box-shadow: 0 0 10px currentColor;
                    `;
                    
                    document.body.appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 1500);
                }, i * 20);
            }
        }

        // Create wishes stage effects
        function createWishesEffects() {
            console.log('🎉 Creating wishes stage effects');
            
            // Create floating hearts
            createFloatingHearts();
            
            // Create sparkle effects
            createWishesSparkles();
            
            // Add photo particle effects
            setTimeout(() => {
                createPhotoParticles();
            }, 3000);
        }

        // Create floating hearts background
        function createFloatingHearts() {
            const heartsContainer = document.querySelector('.floating-hearts');
            if (!heartsContainer) return;
            
            const heartSymbols = ['💜', '💖', '💕', '✨', '🌟', '💫'];
            
            for (let i = 0; i < 10; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
                    heart.style.cssText = `
                        position: absolute;
                        font-size: ${Math.random() * 20 + 15}px;
                        left: ${Math.random() * 100}%;
                        top: 100%;
                        animation: floatUp ${Math.random() * 2 + 3}s linear infinite;
                        animation-delay: ${Math.random() * 1}s;
                        pointer-events: none;
                        opacity: 0.8;
                    `;
                    heartsContainer.appendChild(heart);
                    
                    setTimeout(() => heart.remove(), 5000);
                }, i * 200);
            }
        }

        // Create sparkles for wishes stage
        function createWishesSparkles() {
            const sparkleContainer = document.querySelector('.sparkle-container');
            if (!sparkleContainer) return;
            
            const colors = ['#8B5CF6', '#A78BFA', '#C4B5FD', '#E9D5FF', '#F3E8FF'];
            
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const sparkle = document.createElement('div');
                    sparkle.style.cssText = `
                        position: absolute;
                        width: ${Math.random() * 6 + 2}px;
                        height: ${Math.random() * 6 + 2}px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        border-radius: 50%;
                        top: ${Math.random() * 100}%;
                        left: ${Math.random() * 100}%;
                        animation: twinkle ${Math.random() * 1.5 + 1}s ease-in-out infinite;
                        animation-delay: ${Math.random() * 1}s;
                        pointer-events: none;
                        box-shadow: 0 0 ${Math.random() * 10 + 5}px currentColor;
                    `;
                    sparkleContainer.appendChild(sparkle);
                    
                    setTimeout(() => sparkle.remove(), 5000);
                }, i * 80);
            }
        }

        // Create particle effects around photos
        function createPhotoParticles() {
            const photoCards = document.querySelectorAll('.photo-card');
            
            photoCards.forEach((card, index) => {
                const particlesContainer = card.querySelector('.photo-particles');
                if (!particlesContainer) return;
                
                setTimeout(() => {
                    for (let i = 0; i < 8; i++) {
                        const particle = document.createElement('div');
                        particle.style.cssText = `
                            position: absolute;
                            width: 4px;
                            height: 4px;
                            background: #8B5CF6;
                            border-radius: 50%;
                            top: ${Math.random() * 100}%;
                            left: ${Math.random() * 100}%;
                            animation: particleOrbit 3s linear infinite;
                            animation-delay: ${i * 0.2}s;
                            pointer-events: none;
                        `;
                        particlesContainer.appendChild(particle);
                    }
                }, index * 500);
            });
        }

        // Continue the birthday journey after countdown and universe
        function continueJourney() {
            setTimeout(() => {
                const universeStage = document.getElementById('stageUniverse');
                universeStage.classList.remove('active');
                setTimeout(() => {
                    universeStage.style.display = 'none';
                }, 2000);
                
                document.getElementById('stageWishes').style.display = 'block';
                document.getElementById('stageWishes').classList.add('active');
                
                // Start wishes stage effects
                createWishesEffects();
            }, 8000);

            setTimeout(() => {
                const wishesStage = document.getElementById('stageWishes');
                wishesStage.classList.remove('active');
                setTimeout(() => {
                    wishesStage.style.display = 'none';
                }, 2000);
                
                const cakeStage = document.getElementById('stageCake');
                cakeStage.style.display = 'block';
                cakeStage.classList.add('active');
                cakeStage.style.zIndex = '1000'; // Ensure it's on top
                
                console.log('Cake stage activated, setting up knife...');
                
                // Set up knife click listener after cake stage is active
                setTimeout(() => {
                    setupKnifeListener();
                }, 3000); // Wait for knife to appear
            }, 25000); // 25 seconds - after all photos and messages complete
        }

        // Setup knife click listener
        function setupKnifeListener() {
            const knife = document.getElementById('knifeElement');
            if (knife) {
                console.log('🔪 Setting up knife listener...');
                
                // Remove any existing listeners
                knife.replaceWith(knife.cloneNode(true));
                const newKnife = document.getElementById('knifeElement');
                
                // Add a very simple click handler
                newKnife.onclick = function(e) {
                    console.log('🎯 KNIFE ONCLICK TRIGGERED!');
                    e.preventDefault();
                    e.stopPropagation();
                    cutCake();
                };
                
                // Add event listener as backup
                // Add both click and touch support
                newKnife.addEventListener('click', function(e) {
                    console.log('🎯 KNIFE CLICK EVENT TRIGGERED!');
                    e.preventDefault();
                    e.stopPropagation();
                    cutCake();
                }, true);
                
                newKnife.addEventListener('touchstart', function(e) {
                    console.log('🎯 KNIFE TOUCH EVENT TRIGGERED!');
                    e.preventDefault();
                    e.stopPropagation();
                    cutCake();
                }, { passive: false });
                
                // Visual feedback for desktop
                newKnife.addEventListener('mouseenter', function() {
                    newKnife.style.background = 'rgba(139, 92, 246, 0.4)';
                    newKnife.style.transform = 'scale(1.05) rotate(5deg)';
                });
                
                newKnife.addEventListener('mouseleave', function() {
                    newKnife.style.background = 'rgba(139, 92, 246, 0.2)';
                    newKnife.style.transform = 'scale(1) rotate(0deg)';
                });
                
                // Touch feedback for mobile
                newKnife.addEventListener('touchstart', function() {
                    newKnife.style.background = 'rgba(139, 92, 246, 0.4)';
                    newKnife.style.transform = 'scale(1.05) rotate(5deg)';
                }, { passive: true });
                
                newKnife.addEventListener('touchend', function() {
                    setTimeout(() => {
                        newKnife.style.background = 'rgba(139, 92, 246, 0.2)';
                        newKnife.style.transform = 'scale(1) rotate(0deg)';
                    }, 100);
                }, { passive: true });
                
                // Make sure it's visible and interactive
                newKnife.style.pointerEvents = 'auto';
                newKnife.style.zIndex = '9999';
                
                console.log('✅ Knife listener set up successfully!');
            } else {
                console.error('❌ Knife element not found!');
                // Retry after a short delay
                setTimeout(setupKnifeListener, 500);
            }
        }

        // Cut the cake and start memories
        function cutCake() {
            console.log('🎂 CAKE CUTTING FUNCTION CALLED! 🎂');
            
            try {
                // Disable the knife to prevent multiple clicks
                const knife = document.getElementById('knifeElement');
                if (knife) {
                    knife.style.pointerEvents = 'none';
                    knife.style.opacity = '0.5';
                    knife.style.transform = 'scale(1.2) rotate(45deg)';
                    console.log('Knife disabled successfully');
                }
                
                // Fade out background music and play birthday song
                console.log('Stopping background music and playing birthday song...');
                fadeOutBackgroundMusic(1500);
                
                // Wait a moment for fade out, then start birthday song
                setTimeout(() => {
                    playBirthdaySong();
                }, 1000);
                
                // Show cake cutting effect
                const cake = document.querySelector('.cake-emoji');
                if (cake) {
                    cake.style.animation = 'none';
                    cake.innerHTML = '🍰🎉✨';
                    cake.style.transform = 'scale(1.5)';
                    cake.style.filter = 'brightness(1.3) contrast(1.1)';
                    console.log('Cake transformation applied');
                }
                
                // Update instruction text
                const instruction = document.querySelector('.cut-instruction');
                if (instruction) {
                    instruction.innerHTML = '🎉✨ CAKE CUT SUCCESSFULLY! CELEBRATING... ✨🎉';
                    instruction.style.color = '#C4B5FD';
                    instruction.style.fontSize = '2.5rem';
                    instruction.style.textShadow = '0 0 20px rgba(196, 181, 253, 0.8)';
                    console.log('Instruction updated');
                }
                
                // Create massive celebration
                console.log('Creating celebration particles...');
                createMegaCelebration();
                
                // Add extra celebration effects
                setTimeout(() => {
                    createMegaCelebration();
                }, 1000);
                
                setTimeout(() => {
                    createMegaCelebration();
                }, 2000);
                
                setTimeout(() => {
                    console.log('Starting memories slideshow...');
                    const cakeStage = document.getElementById('stageCake');
                    const memoryStage = document.getElementById('stageMemories');
                    
                    if (cakeStage && memoryStage) {
                        cakeStage.classList.remove('active');
                        memoryStage.style.display = 'block';
                        memoryStage.classList.add('active');
                        startSlideshow();
                    }
                }, 5000);
                
            } catch (error) {
                console.error('Error in cutCake function:', error);
            }
        }

        // Enhanced celebration function
        function createMegaCelebration() {
            const colors = ['#8B5CF6', '#A78BFA', '#C4B5FD', '#E9D5FF', '#F3E8FF', '#FFD700', '#FF69B4'];
            for (let i = 0; i < 80; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.top = (Math.random() * 50 + 25) + '%';
                    particle.style.left = (Math.random() * 80 + 10) + '%';
                    particle.style.width = (Math.random() * 15 + 8) + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.borderRadius = Math.random() > 0.5 ? '50%' : '0%';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '9999';
                    particle.style.opacity = Math.random() * 0.8 + 0.2;
                    particle.style.boxShadow = `0 0 20px ${colors[Math.floor(Math.random() * colors.length)]}`;
                    
                    const animationDuration = Math.random() * 4 + 3;
                    particle.style.animation = `celebrationFloat ${animationDuration}s ease-out forwards`;
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, animationDuration * 1000);
                }, i * 15);
            }
        }

        // Global audio players
        let birthdayAudio = null;
        let backgroundMusicAudio = null;
        let isAudioEnabled = false;
        let backgroundMusicEnabled = false;

        // Initialize and play background music (start.mp3)
        function playBackgroundMusic() {
            console.log('🎵 Starting background music (start.mp3)');
            
            // Show audio control and update status
            const audioControl = document.getElementById('audioControl');
            const audioStatus = document.getElementById('audioStatus');
            if (audioControl && audioStatus) {
                audioControl.style.display = 'block';
                audioStatus.textContent = 'Background Music Playing 🎶';
            }
            
            try {
                if (!backgroundMusicAudio) {
                    backgroundMusicAudio = document.getElementById('backgroundMusic');
                    
                    if (backgroundMusicAudio) {
                        backgroundMusicAudio.loop = true;
                        backgroundMusicAudio.volume = 0.4; // Lower volume for background
                        
                        backgroundMusicAudio.addEventListener('loadeddata', () => {
                            console.log('🎵 Background music loaded successfully');
                        });
                        
                        backgroundMusicAudio.addEventListener('error', (e) => {
                            console.error('🎵 Background music error:', e);
                            if (audioStatus) audioStatus.textContent = 'Background Music Error';
                        });
                        
                        backgroundMusicAudio.addEventListener('play', () => {
                            backgroundMusicEnabled = true;
                            console.log('🎵 Background music started playing');
                            if (audioStatus) audioStatus.textContent = 'Background Music Playing 🎶';
                        });
                        
                        backgroundMusicAudio.addEventListener('pause', () => {
                            backgroundMusicEnabled = false;
                            console.log('🎵 Background music paused');
                        });
                    }
                }
                
                if (backgroundMusicAudio) {
                    backgroundMusicAudio.currentTime = 0;
                    const playPromise = backgroundMusicAudio.play();
                    
                    if (playPromise !== undefined) {
                        playPromise.then(() => {
                            console.log('🎵 Background music playing successfully');
                            backgroundMusicEnabled = true;
                        }).catch(error => {
                            console.error('🎵 Background music play failed:', error);
                            if (audioStatus) audioStatus.textContent = 'Click anywhere to enable music';
                        });
                    }
                }
                
            } catch (error) {
                console.error('🎵 Error setting up background music:', error);
                if (audioStatus) audioStatus.textContent = 'Background Music Not Available';
            }
        }

        // Stop background music
        function stopBackgroundMusic() {
            if (backgroundMusicAudio && !backgroundMusicAudio.paused) {
                backgroundMusicAudio.pause();
                backgroundMusicAudio.currentTime = 0;
                backgroundMusicEnabled = false;
                console.log('🎵 Background music stopped');
            }
        }

        // Fade out background music
        function fadeOutBackgroundMusic(duration = 2000) {
            if (backgroundMusicAudio && !backgroundMusicAudio.paused) {
                const fadeAudio = backgroundMusicAudio;
                const originalVolume = fadeAudio.volume;
                const fadeStep = originalVolume / (duration / 50);
                
                const fadeInterval = setInterval(() => {
                    if (fadeAudio.volume > fadeStep) {
                        fadeAudio.volume -= fadeStep;
                    } else {
                        fadeAudio.volume = 0;
                        fadeAudio.pause();
                        fadeAudio.currentTime = 0;
                        fadeAudio.volume = originalVolume; // Reset for next time
                        backgroundMusicEnabled = false;
                        clearInterval(fadeInterval);
                        console.log('🎵 Background music faded out and stopped');
                    }
                }, 50);
            }
        }

        // Initialize and play happy birthday audio
        function playBirthdaySong() {
            console.log('🎵 Playing Happy Birthday audio file (looping)');
            document.getElementById('audioControl').style.display = 'block';
            document.getElementById('audioStatus').textContent = 'Happy Birthday Song Playing 🔄🎵';
            
            try {
                // Create audio element if it doesn't exist
                if (!birthdayAudio) {
                    birthdayAudio = new Audio('hb.mp3');
                    birthdayAudio.loop = true;  // Enable continuous looping
                    birthdayAudio.volume = 0.7;
                    
                    // Add event listeners
                    birthdayAudio.addEventListener('loadeddata', () => {
                        console.log('🎵 Audio loaded successfully');
                    });
                    
                    birthdayAudio.addEventListener('error', (e) => {
                        console.error('🎵 Audio error:', e);
                        document.getElementById('audioStatus').textContent = 'Audio Error';
                    });
                    
                    birthdayAudio.addEventListener('ended', () => {
                        console.log('🎵 Happy Birthday song loop completed');
                        // Since loop=true, this will rarely trigger, but keeping for completeness
                    });
                    
                    birthdayAudio.addEventListener('play', () => {
                        document.getElementById('audioIcon').className = 'fas fa-volume-up';
                        document.getElementById('audioStatus').textContent = 'Happy Birthday Song Playing 🔄🎵';
                    });
                    
                    birthdayAudio.addEventListener('pause', () => {
                        document.getElementById('audioIcon').className = 'fas fa-volume-mute';
                        document.getElementById('audioStatus').textContent = 'Audio Paused';
                    });
                }
                
                // Reset and play the audio
                birthdayAudio.currentTime = 0;
                
                const playPromise = birthdayAudio.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('🎵 Happy Birthday audio playing successfully');
                        isAudioEnabled = true;
                    }).catch(error => {
                        console.error('🎵 Audio play failed:', error);
                        document.getElementById('audioStatus').textContent = 'Click anywhere to enable audio';
                        // Fallback - try to enable audio on next user interaction
                        document.addEventListener('click', () => {
                            birthdayAudio.play().catch(e => console.log('Audio still blocked'));
                        }, { once: true });
                    });
                }
                
            } catch (error) {
                console.error('🎵 Error setting up audio:', error);
                document.getElementById('audioStatus').textContent = 'Audio Not Available';
            }
        }
        
        // Stop the birthday song
        function stopBirthdaySong() {
            if (birthdayAudio && !birthdayAudio.paused) {
                birthdayAudio.pause();
                birthdayAudio.currentTime = 0;
                console.log('🎵 Birthday song stopped');
            }
        }

        // Create celebration particles
        function createCelebration() {
            const colors = ['#8B5CF6', '#A78BFA', '#C4B5FD', '#E9D5FF', '#F3E8FF'];
            for (let i = 0; i < 50; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.style.position = 'fixed';
                    particle.style.top = Math.random() * 100 + '%';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.width = Math.random() * 10 + 5 + 'px';
                    particle.style.height = particle.style.width;
                    particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    particle.style.borderRadius = '50%';
                    particle.style.pointerEvents = 'none';
                    particle.style.zIndex = '9999';
                    particle.style.animation = 'celebrationFloat 3s ease-out forwards';
                    
                    document.body.appendChild(particle);
                    
                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                    }, 3000);
                }, i * 20);
            }
        }

        // Handle video loading errors
        function handleVideoError(videoElement, index) {
            console.error('🎬 Video failed to load due to codec/metadata issues:', videoElement.src);
            const slide = videoElement.closest('.slide');
            const overlay = document.getElementById(`overlay-${index}`);
            
            // Hide the video and overlay
            videoElement.style.display = 'none';
            if (overlay) overlay.style.display = 'none';
            
            // Find the corresponding memory item to get fallback image
            const videoContainer = videoElement.parentNode;
            const memoryItem = memoryImages[index];
            
            if (memoryItem && memoryItem.fallback) {
                // Use fallback image
                console.log('🎬 Using fallback image:', memoryItem.fallback);
                const fallbackImg = document.createElement('img');
                fallbackImg.src = memoryItem.fallback;
                fallbackImg.alt = memoryItem.title;
                fallbackImg.style.cssText = `
                    max-width: 100%;
                    max-height: 70vh;
                    width: auto;
                    height: auto;
                    object-fit: contain;
                    border-radius: 20px;
                    box-shadow: 0 20px 60px rgba(139, 92, 246, 0.5);
                    background: rgba(0, 0, 0, 0.2);
                `;
                fallbackImg.onerror = function() {
                    console.error('🎬 Fallback image also failed to load');
                    this.style.display = 'none';
                };
                
                // Add video icon overlay to indicate it was meant to be a video
                const videoIndicator = document.createElement('div');
                videoIndicator.innerHTML = '🎬';
                videoIndicator.style.cssText = `
                    position: absolute;
                    top: 20px;
                    right: 20px;
                    background: rgba(139, 92, 246, 0.9);
                    color: white;
                    padding: 8px 12px;
                    border-radius: 20px;
                    font-size: 16px;
                    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
                    z-index: 5;
                `;
                
                videoContainer.style.position = 'relative';
                videoContainer.appendChild(fallbackImg);
                videoContainer.appendChild(videoIndicator);
            } else {
                // Create a beautiful placeholder for the failed video
                const errorDiv = document.createElement('div');
                errorDiv.innerHTML = `
                    <div style="
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: center;
                        min-height: 300px;
                        background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(79, 70, 229, 0.1));
                        border: 2px dashed rgba(139, 92, 246, 0.3);
                        border-radius: 20px;
                        padding: 40px;
                        text-align: center;
                        color: rgba(255,255,255,0.8);
                        backdrop-filter: blur(10px);
                    ">
                        <div style="font-size: 4em; margin-bottom: 20px;">🎬</div>
                        <h3 style="color: #8B5CF6; margin-bottom: 15px;">Video Memory</h3>
                        <p style="margin-bottom: 20px; max-width: 400px;">
                            This video memory needs to be converted to a web-compatible format.
                        </p>
                        <div style="padding: 10px 20px; background: rgba(139, 92, 246, 0.2); border-radius: 25px; font-size: 0.8em;">
                            💜 Still a beautiful memory 💜
                        </div>
                    </div>
                `;
                videoContainer.appendChild(errorDiv);
            }
        }

        // Pure autoplay mode - no user interaction required

        // Start the memories slideshow
        function startSlideshow() {
            const container = document.getElementById('slideshowContainer');
            
            // Mobile detection
            const isMobile = window.innerWidth <= 768;
            
            // Clear any existing slides and intervals
            container.innerHTML = '';
            if (slideInterval) {
                clearInterval(slideInterval);
            }
            currentSlide = 0;
            
            // Ensure container is properly setup for mobile
            if (isMobile) {
                container.style.cssText = `
                    position: relative !important;
                    width: 100vw !important;
                    height: 100vh !important;
                    padding: 0 !important;
                    margin: 0 !important;
                    overflow: hidden !important;
                `;
            }
            
            // Array of different transition effects (no rotation to prevent tilted images)
            const transitionEffects = [
                'fade-in', 'slide-up', 'slide-down', 'slide-left', 
                'slide-right', 'zoom-in', 'bounce-in', 'elastic-in'
            ];
            
            // Create slides with random left/right positioning and transition effects
            memoryImages.forEach((image, index) => {
                const slide = document.createElement('div');
                
                // Randomly choose left or right positioning for image
                const isImageLeft = Math.random() < 0.5;
                
                // Randomly choose a transition effect
                const randomEffect = transitionEffects[Math.floor(Math.random() * transitionEffects.length)];
                
                // Combine classes
                const positionClass = isImageLeft ? 'left-image' : 'right-image';
                slide.className = `slide ${positionClass} ${randomEffect}`;
                
                // Check if it's a video, video-image, or regular image
                const isVideo = image.type === 'video';
                const isVideoImage = image.type === 'video-image';
                
                slide.innerHTML = `
                    <div class="slide-image-container" style="position: relative;">
                        ${isVideo ? 
                            `<video id="video-${index}" 
                                   muted 
                                   autoplay
                                   playsinline 
                                   preload="auto"
                                   onloadeddata="console.log('🎬 Video loaded successfully:', '${image.src}');"
                                   oncanplay="console.log('🎬 Video can play:', '${image.src}');"
                                   onended="console.log('🎬 Video ${index} ended naturally');"
                                   onerror="console.error('❌ Video error:', '${image.src}', event); handleVideoError(this, ${index});"
                                   onloadstart="console.log('🎬 Video load started:', '${image.src}');">
                                   <source src="${image.src}" type="video/webm">
                                   <source src="${image.src.replace('.webm', '.mp4')}" type="video/mp4">
                                   <p>Your browser doesn't support video playback. Please use a modern browser that supports WebM or MP4 format.</p>
                             </video>` : 
                         isVideoImage ?
                            `<img src="${image.src}" 
                                  alt="${image.title}" 
                                  onerror="this.style.display='none'; console.log('Image failed to load:', '${image.src}');" 
                                  loading="eager">
                             <div style="
                                 position: absolute;
                                 top: 20px;
                                 right: 20px;
                                 background: rgba(139, 92, 246, 0.9);
                                 color: white;
                                 padding: 8px 12px;
                                 border-radius: 20px;
                                 font-size: 16px;
                                 box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
                                 z-index: 5;
                             ">🎬</div>` :
                            `<img src="${image.src}" 
                                  alt="${image.title}" 
                                  onerror="this.style.display='none'; console.log('Image failed to load:', '${image.src}');" 
                                  loading="eager">`
                        }
                    </div>
                    <div class="slide-content">
                        <h3 class="slide-title birthday-font">${image.title}</h3>
                        <p class="slide-description">${image.description}</p>
                    </div>
                `;
                container.appendChild(slide);
            });
            
            // Initialize videos for autoplay (no controls, no overlays)
            memoryImages.forEach((image, index) => {
                if (image.type === 'video') {
                    const video = document.getElementById(`video-${index}`);
                    
                    if (video) {
                        // Add detailed logging for video loading
                        video.addEventListener('loadstart', () => {
                            console.log(`🎬 Video ${index} load started: ${image.src}`);
                        });
                        
                        video.addEventListener('loadeddata', () => {
                            console.log(`🎬 Video ${index} data loaded successfully`);
                        });
                        
                        video.addEventListener('canplay', () => {
                            console.log(`🎬 Video ${index} can play`);
                        });
                        
                        video.addEventListener('error', (e) => {
                            console.error(`🎬 Video ${index} error:`, e);
                            if (video.error) {
                                console.error(`🎬 Video error code: ${video.error.code}, message: ${video.error.message || 'Unknown error'}`);
                            }
                        });
                        
                        video.addEventListener('play', () => {
                            console.log(`🎬 Video ${index} started playing automatically`);
                        });
                        
                        video.addEventListener('ended', () => {
                            console.log(`🎬 Video ${index} ended naturally`);
                        });
                        
                        // Force load the video for better autoplay
                        video.load();
                    }
                }
            });
            
            // Show first slide
            showSlide(0);
            
            // Setup event-based slide progression (videos play fully, images show for set time)
            setupSlideProgression();
        }

        // Setup event-based slide progression
        function setupSlideProgression() {
            function goToNextSlide() {
                currentSlide++;
                if (currentSlide >= memoryImages.length) {
                    // All slides shown, show final message
                    setTimeout(() => {
                        showFinalMessage();
                    }, 2000);
                } else {
                    showSlide(currentSlide);
                    setupCurrentSlideProgression();
                }
            }

            function setupCurrentSlideProgression() {
                const currentImage = memoryImages[currentSlide];
                const isVideo = currentImage.type === 'video';
                
                if (isVideo) {
                    // For videos: wait for video to end naturally
                    const video = document.getElementById(`video-${currentSlide}`);
                    if (video) {
                        // Remove any existing listeners to prevent duplicates
                        video.onended = null;
                        
                        // Add listener for when video ends
                        const handleVideoEnd = () => {
                            setTimeout(goToNextSlide, 1000); // Small delay before transition
                        };
                        
                        video.addEventListener('ended', handleVideoEnd, { once: true });
                        
                        // Also listen for user manually seeking to end
                        video.addEventListener('seeked', () => {
                            if (video.currentTime >= video.duration - 0.5) {
                                handleVideoEnd();
                            }
                        });
                        
                        // Fallback: if video doesn't play or is very long, add max time limit
                        setTimeout(() => {
                            if (currentSlide < memoryImages.length && memoryImages[currentSlide].type === 'video') {
                                goToNextSlide();
                            }
                        }, 30000); // 30 second max for any video
                        
                    } else {
                        setTimeout(goToNextSlide, 6000); // Fallback to timer
                    }
                } else {
                    // For images: show for fixed duration
                    setTimeout(goToNextSlide, 6000); // 6 seconds for images
                }
            }

            // Setup progression for the first slide
            setupCurrentSlideProgression();
        }

        // Show enhanced animated final birthday message
        function showFinalMessage() {
            // Hide all other stages
            document.querySelectorAll('.stage-start, .stage-universe, .stage-wishes, .stage-cake, .stage-memories').forEach(stage => {
                stage.classList.remove('active');
            });
            
            // Show thank you stage
            const thankYouStage = document.getElementById('stageThankYou');
            if (thankYouStage) {
                thankYouStage.classList.add('active');
                
                // Create mega celebration after animations complete
                setTimeout(() => {
                    createMegaCelebration();
                }, 5000);
            }
            finalSlide.className = 'slide active final-slide animated-final';
            finalSlide.style.cssText = `
                display: flex !important;
                flex-direction: column !important;
                text-align: center !important;
                justify-content: center !important;
                align-items: center !important;
                padding: 20px !important;
                opacity: 0 !important;
                transform: scale(0.3) !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                z-index: 9999 !important;
                background: linear-gradient(135deg, #1a1a2e, #16213e, #0f4c75) !important;
                animation: finalSlideEntrance 2s ease-out forwards !important;
                overflow: hidden !important;
            `;
            
            finalSlide.innerHTML = `
                <div class="final-birthday-content" style="text-align: center; max-width: 90%; margin: 0 auto; position: relative;">
                    
                    <!-- Animated Title -->
                    <div class="title-container" style="margin-bottom: 40px;">
                        <h1 class="birthday-font final-title" style="
                            font-size: clamp(3rem, 8vw, 5rem); 
                            background: linear-gradient(45deg, #8B5CF6, #A78BFA, #C4B5FD, #E9D5FF, #8B5CF6); 
                            background-size: 300% 300%;
                            background-clip: text; 
                            -webkit-background-clip: text; 
                            -webkit-text-fill-color: transparent; 
                            line-height: 1.2;
                            animation: gradientShift 3s ease-in-out infinite, titleBounce 2s ease-out 0.5s forwards;
                            transform: translateY(-50px);
                            opacity: 0;
                            text-shadow: 0 0 30px rgba(139, 92, 246, 0.5);
                        ">
                            🎉 Happy Birthday Vaisuhhhh! 💜
                        </h1>
                        <div class="sparkles" style="
                            position: absolute;
                            top: -20px;
                            left: 50%;
                            transform: translateX(-50%);
                            font-size: 2rem;
                            animation: sparkleFloat 2s ease-in-out infinite alternate;
                        ">✨ ⭐ ✨ ⭐ ✨</div>
                    </div>
                    
                    <!-- Thank You Messages with Staggered Animation -->
                    <div class="thank-you-messages" style="margin-bottom: 40px;">
                        <p class="message-line" style="
                            font-size: clamp(1.2rem, 3.5vw, 1.8rem); 
                            color: #E9D5FF; 
                            margin-bottom: 25px; 
                            line-height: 1.5;
                            opacity: 0;
                            transform: translateX(-100px);
                            animation: slideInLeft 1s ease-out 1.5s forwards;
                        ">
                            💝 Thank you for being absolutely amazing, Vaisuhhhh! 💝
                        </p>
                        
                        <p class="message-line" style="
                            font-size: clamp(1.1rem, 3vw, 1.6rem); 
                            color: #C4B5FD; 
                            margin-bottom: 25px;
                            line-height: 1.5;
                            opacity: 0;
                            transform: translateX(100px);
                            animation: slideInRight 1s ease-out 2s forwards;
                        ">
                            🌟 Your kindness, beauty, and wonderful spirit brighten every day! 🌟
                        </p>
                        
                        <p class="message-line" style="
                            font-size: clamp(1.1rem, 3vw, 1.6rem); 
                            color: #A78BFA; 
                            margin-bottom: 25px;
                            line-height: 1.5;
                            opacity: 0;
                            transform: translateY(50px);
                            animation: slideInUp 1s ease-out 2.5s forwards;
                        ">
                            🎈 May this new year bring you endless happiness, love, and success! 🎈
                        </p>
                        
                        <p class="message-line" style="
                            font-size: clamp(1.2rem, 3.2vw, 1.7rem); 
                            color: #DDD6FE; 
                            margin-bottom: 30px;
                            line-height: 1.5;
                            opacity: 0;
                            transform: scale(0.5);
                            animation: popIn 1s ease-out 3s forwards;
                            font-weight: bold;
                        ">
                            🎂✨ You deserve all the wonderful things life has to offer! ✨🎂
                        </p>
                    </div>
                    
                    <!-- Animated Hearts and Celebration -->
                    <div class="celebration-section" style="margin-top: 30px;">
                        <div class="celebration-hearts" style="
                            font-size: clamp(1.8rem, 5vw, 3rem); 
                            margin-bottom: 20px;
                            animation: heartPulse 2s ease-in-out infinite alternate, fadeInScale 1s ease-out 3.5s forwards;
                            opacity: 0;
                            transform: scale(0);
                        ">
                            💜 🎉 ✨ 🎂 🫶🏻 🎈 � 💝 💜
                        </div>
                        
                        <div class="final-wishes" style="
                            font-size: clamp(1rem, 2.8vw, 1.4rem);
                            color: #F3E8FF;
                            animation: glow 2s ease-in-out infinite alternate, slideInUp 1s ease-out 4s forwards;
                            opacity: 0;
                            transform: translateY(30px);
                            text-shadow: 0 0 10px rgba(139, 92, 246, 0.5);
                        ">
                            🎊 Wishing you the most magical birthday ever! 🎊<br>
                            💫 Stay amazing, stay beautiful, stay you! 💫
                        </div>
                    </div>
                </div>
            `;
            
            container.appendChild(finalSlide);
            
            // Create mega celebration after animations complete
            setTimeout(() => {
                createMegaCelebration();
            }, 5000);
            
            console.log('✅ Enhanced animated thank you message displayed');
        }

        // Show specific slide with enhanced mobile optimization
        function showSlide(index) {
            const slides = document.querySelectorAll('.slide');
            const isMobile = window.innerWidth <= 768;
            const isLandscape = window.innerWidth > window.innerHeight && isMobile;
            
            slides.forEach((slide, i) => {
                const isActive = i === index;
                slide.classList.toggle('active', isActive);
                
                // Handle video playback (no controls, pure autoplay)
                const video = slide.querySelector('video');
                if (video && video.style.display !== 'none') {
                    if (isActive) {
                        console.log(`🎬 Attempting to autoplay video: ${video.src}`);
                        video.currentTime = 0; // Reset to start
                        
                        // Force play the video (no user interaction required)
                        video.play().then(() => {
                            console.log(`🎬 Video autoplaying successfully: ${video.src}`);
                        }).catch(error => {
                            console.log(`🎬 Video autoplay failed: ${error.message}. Retrying...`);
                            // Retry after a short delay
                            setTimeout(() => {
                                video.play().catch(e => console.log('🎬 Video retry failed:', e.message));
                            }, 500);
                        });
                    } else {
                        // Pause video when slide becomes inactive
                        video.pause();
                    }
                }
                
                // Mobile-specific positioning and visibility
                if (isMobile) {
                    if (isActive) {
                        const flexDirection = isLandscape ? 
                            (slide.classList.contains('right-image') ? 'row-reverse' : 'row') : 
                            'column';
                            
                        slide.style.cssText = `
                            display: flex !important;
                            opacity: 1 !important;
                            z-index: 10 !important;
                            position: absolute !important;
                            top: 0 !important;
                            left: 0 !important;
                            width: 100vw !important;
                            height: 100vh !important;
                            flex-direction: ${flexDirection} !important;
                            align-items: center !important;
                            justify-content: center !important;
                            margin: 0 !important;
                            padding: 0 !important;
                            box-sizing: border-box !important;
                            overflow: hidden !important;
                        `;
                        
                        // Ensure image container positioning
                        const imageContainer = slide.querySelector('.slide-image-container');
                        const content = slide.querySelector('.slide-content');
                        
                        if (imageContainer && content) {
                            if (isLandscape) {
                                imageContainer.style.cssText = `
                                    width: 50vw !important;
                                    height: 100vh !important;
                                    display: flex !important;
                                    justify-content: center !important;
                                    align-items: center !important;
                                    order: 1 !important;
                                    padding: 10px !important;
                                    box-sizing: border-box !important;
                                `;
                                content.style.cssText = `
                                    width: 50vw !important;
                                    height: 100vh !important;
                                    display: flex !important;
                                    flex-direction: column !important;
                                    justify-content: center !important;
                                    align-items: center !important;
                                    order: 2 !important;
                                    padding: 20px 15px !important;
                                    text-align: center !important;
                                    box-sizing: border-box !important;
                                `;
                            } else {
                                imageContainer.style.cssText = `
                                    width: 100vw !important;
                                    height: 60vh !important;
                                    display: flex !important;
                                    justify-content: center !important;
                                    align-items: center !important;
                                    order: 1 !important;
                                    padding: 0 15px !important;
                                    box-sizing: border-box !important;
                                `;
                                content.style.cssText = `
                                    width: 100vw !important;
                                    height: 40vh !important;
                                    display: flex !important;
                                    flex-direction: column !important;
                                    justify-content: flex-start !important;
                                    align-items: center !important;
                                    order: 2 !important;
                                    padding: 20px !important;
                                    text-align: center !important;
                                    box-sizing: border-box !important;
                                    overflow-y: auto !important;
                                `;
                            }
                        }
                    } else {
                        slide.style.cssText = `
                            display: none !important;
                            opacity: 0 !important;
                            z-index: 1 !important;
                        `;
                    }
                }
            });
            
            console.log(`📱 Showing slide ${index + 1}, Mobile: ${isMobile}, Landscape: ${isLandscape}`);
        }

        // Add celebration animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes heartPulse {
                0% { 
                    transform: scale(1);
                    opacity: 0.8;
                }
                100% { 
                    transform: scale(1.1);
                    opacity: 1;
                }
            }
            
            .final-slide {
                display: flex !important;
                visibility: visible !important;
            }
            
            @keyframes celebrationFloat {
                0% { 
                    transform: translateY(0) rotate(0deg) scale(0);
                    opacity: 0;
                }
                10% {
                    opacity: 1;
                    transform: translateY(-20px) rotate(45deg) scale(1);
                }
                90% {
                    opacity: 0.8;
                    transform: translateY(-200px) rotate(315deg) scale(1.2);
                }
                100% { 
                    transform: translateY(-300px) rotate(360deg) scale(0);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize cursor effect (only for non-interactive elements)
        document.addEventListener('mousemove', (e) => {
            // Only hide cursor if not over clickable elements
            const target = e.target;
            if (!target.classList.contains('knife') && !target.classList.contains('lets-go-btn')) {
                document.body.style.cursor = 'none';
                
                // Create cursor trail
                const trail = document.createElement('div');
                trail.style.position = 'fixed';
                trail.style.top = e.clientY + 'px';
                trail.style.left = e.clientX + 'px';
                trail.style.width = '8px';
                trail.style.height = '8px';
                trail.style.background = 'rgba(139, 92, 246, 0.4)';
                trail.style.borderRadius = '50%';
                trail.style.pointerEvents = 'none';
                trail.style.zIndex = '9999';
                trail.style.animation = 'trailFade 0.8s ease-out forwards';
                
                document.body.appendChild(trail);
                
                setTimeout(() => {
                    if (trail.parentNode) {
                        trail.parentNode.removeChild(trail);
                    }
                }, 800);
            } else {
                document.body.style.cursor = 'pointer';
            }
        });

        // Add trail fade animation
        const trailStyle = document.createElement('style');
        trailStyle.textContent = `
            @keyframes trailFade {
                0% {
                    opacity: 1;
                    transform: scale(1);
                }
                100% {
                    opacity: 0;
                    transform: scale(0);
                }
            }
        `;
        document.head.appendChild(trailStyle);

        // Make cutCake function globally available
        window.cutCake = cutCake;
        
        // Debug: Add window click listener as ultimate fallback
        window.addEventListener('click', function(e) {
            console.log('Window click detected at:', e.target);
            console.log('Current active stage:', document.querySelector('.stage-cake.active') ? 'CAKE STAGE' : 'OTHER STAGE');
            
            // Check if cake stage is active
            const cakeStage = document.getElementById('stageCake');
            const isKnifeClickable = cakeStage && cakeStage.classList.contains('active');
            
            if (isKnifeClickable && e.target && (e.target.classList.contains('knife') || e.target.closest('.knife') || e.target.id === 'knifeElement')) {
                console.log('✅ KNIFE CLICKED! Cake stage is active, calling cutCake...');
                e.preventDefault();
                e.stopPropagation();
                cutCake();
            } else if (e.target && (e.target.classList.contains('knife') || e.target.closest('.knife'))) {
                console.log('❌ Knife clicked but cake stage not active yet');
            }
        });
    </script>
</body>
</html>